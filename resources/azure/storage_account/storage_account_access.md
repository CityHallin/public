# Azure Storage Account Access

Azure Storage Accounts offer a number of ways to authenticate to them that all have different pros and cons; so it gives you choices that best serve your use cases. Keep in mind that Azure Storage Accounts offer different data types (blobs, files, table, and queue messages). These different data types may have their own optimized authentication methods as well as limitations. An example of this is Azure Files in Storage Accounts can be access via REST HTTP methods, but if using SMB there are limitations with NLTMv2 and Kerberos protocols. 

> Here are my opinions on Storage Account access methods below. As these are my opinions, I encourage others to research these methods for what fits your use cases best. 

- **Access Keys**: They keys are basically "god-mode" on the entire Storage Account giving not only full access to all its data, but also full access to control and configure the Storage Account as well. My take is Access Keys should really only be used to manage the Storage Account by admins since it's so powerful and really should not be used for normal app or user access. [Storage Account Access Keys](https://learn.microsoft.com/en-us/azure/storage/common/storage-account-keys-manage?tabs=azure-portal#protect-your-access-keys)

- **Managed Identities**: These are really great if you have an Azure resources that needs access to data in an Azure Storage Account. The Managed Identities are basically Entra IDs that are attached directly to Azure resources that then can be assigned to Azure access roles for Storage Account data access. What is also great is Azure manages the passwords for these so you do not have to worry about rotating them regularly. The limitation for Managed Identities is they can only be used on Azure resources accessing other Azure resources and not resource outside Azure. [Managed Identities](https://learn.microsoft.com/en-us/entra/identity/managed-identities-azure-resources/overview)

- **Shared Access Signature (SAS) Tokens**: These are tokens that can be generated by Azure Storage Accounts that give flexibility to what can be accessed in the Storage Account. Examples would be configuring what storage sections can be access, the type of access, time duration, IP limitations, etc. These are great for resources that do not live in Azure to access your Storage Account data resources, but they can be used for Azure resources as well. If you need very granular, customizable access to Storage Account data resources, SAS Tokens are great. Each SAS Token is tied to one Storage Account. The SAS Tokens use the Storage Account's Access Keys to sign them so if you ever rotate the Storage Account's Access Keys, that will invalidate any SAS Tokens the old keys signed. Just something to keep in mind, but most admins limit the SAS Token to have expiration dates to help with this so they are generated more often. [Shared Access Signatures Tokens ](https://learn.microsoft.com/en-us/azure/storage/common/storage-sas-overview)

- **Azure App Registrations**: For non-Azure resources that need Storage Account data access, another option is using App Registrations from Entra. These are Service Principals (basically think of them like service accounts) with a ID and secret. This registration ID can be added to an Azure access role giving a level of data access in a Storage Account. They can be a more "global" way of granting access to numerous Storage Account data resources, but only admins with certain Entra tenant access will have the ability to create these. If you do not have that level of access, SAS Tokens may be a better fit since these are tied to single Storage Accounts. [App Registrations](https://learn.microsoft.com/en-us/entra/identity-platform/quickstart-register-app#add-credentials)